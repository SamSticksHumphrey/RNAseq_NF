#!/bin/bash

# ------------------------------------------------------------------------------
# DownloadResources.sh  S. Humphrey Jan 2022
# Script to document, copy files and install required software for the RNA-seq pipeline
# ------------------------------------------------------------------------------

# Reference files from Ensembl's FTP server, to EC2

# Genome Fasta
# Primary assembly contains all toplevel sequence regions excluding haplotypes and patches.
#   This file is best used for performing sequence similarity searches where patch and haplotype sequences would confuse analysis.
#   If the primary assembly file is not present, that indicates that there are no haplotype/patchregions, and the 'toplevel' file is equivalent.
rsync -av rsync://ftp.ensembl.org/ensembl/pub/release-105/fasta/homo_sapiens/dna/Homo_sapiens.GRCh38.dna.primary_assembly.fa.gz .

# Other fastas
# 'cdna.all' - all transcripts of Ensembl genes, excluding ncRNA.
# 'cdna.abinitio' - transcripts resulting from 'ab initio' gene prediction algorithms such as SNAP and GENSCAN.
# The abinitio does not seem supported, so I will just use the normal ones
rsync -av rsync://ftp.ensembl.org/ensembl/pub/release-105/fasta/homo_sapiens/cdna/Homo_sapiens.GRCh38.cdna.all.fa.gz  .
rsync -av rsync://ftp.ensembl.org/ensembl/pub/release-105/fasta/homo_sapiens/cds/Homo_sapiens.GRCh38.cds.all.fa.gz  .
rsync -av rsync://ftp.ensembl.org/ensembl/pub/release-105/fasta/homo_sapiens/ncrna/Homo_sapiens.GRCh38.ncrna.fa.gz .
rsync -av rsync://ftp.ensembl.org/ensembl/pub/release-105/fasta/homo_sapiens/pep/Homo_sapiens.GRCh38.pep.all.fa.gz  .

# GTF file
rsync -av rsync://ftp.ensembl.org/ensembl/pub/release-105/gtf/homo_sapiens/Homo_sapiens.GRCh38.105.chr.gtf.gz .

# Software files
conda install trim-galore salmon star rsem picard samtools bowtie bcftools kallisto
conda install fastqc sortmerna subread multiQC rseqc qualimap preseq bedtools gffread bioconductor-dupradar bioconductor-tximeta ucsc-bedclip=377 ucsc-bedgraphtobigwig=377

# NGSCheckMate are not on conda

# List of software and versions
_libgcc_mutex             0.1                 conda_forge    conda-forge
_openmp_mutex             4.5                       1_gnu    conda-forge
_r-mutex                  1.0.1               anacondar_1    conda-forge
bcftools                  1.14                 hde04aa1_1    bioconda
bedtools                  2.30.0               h7d7f7ad_2    bioconda
binutils_impl_linux-64    2.36.1               h193b22a_2    conda-forge
binutils_linux-64         2.36                 hf3e587d_4    conda-forge
bioconductor-biobase      2.54.0            r41hd029910_0    bioconda
bioconductor-biocgenerics 0.40.0            r41hdfd78af_0    bioconda
bioconductor-biocio       1.4.0             r41hdfd78af_0    bioconda
bioconductor-biocparallel 1.28.0            r41h399db7b_0    bioconda
bioconductor-biostrings   2.62.0            r41hd029910_0    bioconda
bioconductor-delayedarray 0.20.0            r41hd029910_0    bioconda
bioconductor-dupradar     1.24.0            r41hdfd78af_0    bioconda
bioconductor-ebseq        1.34.0            r41hdfd78af_0    bioconda
bioconductor-genomeinfodb 1.30.0            r41hdfd78af_0    bioconda
bioconductor-genomeinfodbdata 1.2.7             r41hdfd78af_1    bioconda
bioconductor-genomicalignments 1.30.0            r41hd029910_0    bioconda
bioconductor-genomicranges 1.46.0            r41hd029910_0    bioconda
bioconductor-iranges      2.28.0            r41hd029910_0    bioconda
bioconductor-matrixgenerics 1.6.0             r41hdfd78af_0    bioconda
bioconductor-noiseq       2.38.0            r41hdfd78af_0    bioconda
bioconductor-rhtslib      1.26.0            r41hd029910_0    bioconda
bioconductor-rsamtools    2.10.0            r41h399db7b_0    bioconda
bioconductor-rsubread     2.8.0             r41hd029910_0    bioconda
bioconductor-rtracklayer  1.54.0            r41ha2fdcc6_1    bioconda
bioconductor-s4vectors    0.32.0            r41hd029910_0    bioconda
bioconductor-summarizedexperiment 1.24.0            r41hdfd78af_0    bioconda
bioconductor-xvector      0.34.0            r41hd029910_0    bioconda
bioconductor-zlibbioc     1.40.0            r41hd029910_0    bioconda
boost-cpp                 1.74.0               h312852a_4    conda-forge
bowtie                    1.3.1            py39h176da8b_0    bioconda
brotli                    1.0.9                h7f98852_6    conda-forge
brotli-bin                1.0.9                h7f98852_6    conda-forge
brotlipy                  0.7.0           py39h3811e60_1003    conda-forge
bwidget                   1.9.14               ha770c72_1    conda-forge
bx-python                 0.8.13           py39h5d76eff_0    bioconda
bzip2                     1.0.8                h7f98852_4    conda-forge
c-ares                    1.18.1               h7f98852_0    conda-forge
ca-certificates           2021.10.8            ha878542_0    conda-forge
cairo                     1.16.0            h6cf1ce9_1008    conda-forge
certifi                   2021.10.8        py39hf3d152e_1    conda-forge
cffi                      1.15.0           py39h4bc2ebd_0    conda-forge
charset-normalizer        2.0.10             pyhd8ed1ab_0    conda-forge
click                     8.0.3            py39hf3d152e_1    conda-forge
colorama                  0.4.4              pyh9f0ad1d_0    conda-forge
coloredlogs               15.0.1             pyhd8ed1ab_3    conda-forge
colormath                 3.0.0                      py_2    conda-forge
commonmark                0.9.1                      py_0    conda-forge
cryptography              36.0.1           py39h95dcef6_0    conda-forge
curl                      7.81.0               h2574ce0_0    conda-forge
cutadapt                  3.5              py39h38f01e4_0    bioconda
cycler                    0.11.0             pyhd8ed1ab_0    conda-forge
dataclasses               0.8                pyhc8e2a94_3    conda-forge
dnaio                     0.7.1            py39h38f01e4_0    bioconda
fastqc                    0.11.9               hdfd78af_1    bioconda
font-ttf-dejavu-sans-mono 2.37                 hab24e00_0    conda-forge
font-ttf-inconsolata      3.000                h77eed37_0    conda-forge
font-ttf-source-code-pro  2.038                h77eed37_0    conda-forge
font-ttf-ubuntu           0.83                 hab24e00_0    conda-forge
fontconfig                2.13.94              ha180cfb_0    conda-forge
fonts-conda-ecosystem     1                             0    conda-forge
fonts-conda-forge         1                             0    conda-forge
fonttools                 4.29.0           py39h3811e60_0    conda-forge
freetype                  2.10.4               h0708190_1    conda-forge
fribidi                   1.0.10               h36c2ea0_0    conda-forge
future                    0.18.2           py39hf3d152e_4    conda-forge
gcc_impl_linux-64         9.4.0               h03d3576_12    conda-forge
gcc_linux-64              9.4.0                h391b98a_4    conda-forge
gettext                   0.19.8.1          h73d1719_1008    conda-forge
gfortran_impl_linux-64    9.4.0               h0003116_12    conda-forge
gfortran_linux-64         9.4.0                hf0ab688_4    conda-forge
graphite2                 1.3.13            h58526e2_1001    conda-forge
gsl                       2.7                  he838d99_0    conda-forge
gxx_impl_linux-64         9.4.0               h03d3576_12    conda-forge
gxx_linux-64              9.4.0                h0316aca_4    conda-forge
harfbuzz                  3.1.1                h83ec7ef_0    conda-forge
hdf5                      1.10.6          nompi_h6a2412b_1114    conda-forge
htslib                    1.14                 h9093b5e_0    bioconda
humanfriendly             10.0             py39hf3d152e_2    conda-forge
icu                       68.2                 h9c3ff4c_0    conda-forge
idna                      3.3                pyhd8ed1ab_0    conda-forge
importlib-metadata        4.10.1           py39hf3d152e_0    conda-forge
isa-l                     2.30.0               ha770c72_4    conda-forge
jbig                      2.1               h7f98852_2003    conda-forge
jinja2                    3.0.3              pyhd8ed1ab_0    conda-forge
jpeg                      9e                   h7f98852_0    conda-forge
kallisto                  0.48.0               h60f4f9f_0    bioconda
kernel-headers_linux-64   2.6.32              he073ed8_15    conda-forge
kiwisolver                1.3.2            py39h1a9c180_1    conda-forge
krb5                      1.19.2               hcc1bbae_3    conda-forge
lcms2                     2.12                 hddcbb42_0    conda-forge
ld_impl_linux-64          2.36.1               hea4e1c9_2    conda-forge
lerc                      2.2.1                h9c3ff4c_0    conda-forge
libblas                   3.9.0           13_linux64_openblas    conda-forge
libbrotlicommon           1.0.9                h7f98852_6    conda-forge
libbrotlidec              1.0.9                h7f98852_6    conda-forge
libbrotlienc              1.0.9                h7f98852_6    conda-forge
libcblas                  3.9.0           13_linux64_openblas    conda-forge
libcurl                   7.81.0               h2574ce0_0    conda-forge
libdeflate                1.7                  h7f98852_5    conda-forge
libedit                   3.1.20191231         he28a2e2_2    conda-forge
libev                     4.33                 h516909a_1    conda-forge
libffi                    3.4.2                h7f98852_5    conda-forge
libgcc-devel_linux-64     9.4.0               hd854feb_12    conda-forge
libgcc-ng                 11.2.0              h1d223b6_12    conda-forge
libgfortran-ng            11.2.0              h69a702a_12    conda-forge
libgfortran5              11.2.0              h5c6108e_12    conda-forge
libglib                   2.70.2               h174f98d_1    conda-forge
libgomp                   11.2.0              h1d223b6_12    conda-forge
libiconv                  1.16                 h516909a_0    conda-forge
libjemalloc               5.2.1                h9c3ff4c_6    conda-forge
liblapack                 3.9.0           13_linux64_openblas    conda-forge
libnghttp2                1.46.0               h812cca2_0    conda-forge
libnsl                    2.0.0                h7f98852_0    conda-forge
libopenblas               0.3.18          pthreads_h8fe5266_0    conda-forge
libpng                    1.6.37               h21135ba_2    conda-forge
libsanitizer              9.4.0               h79bfe98_12    conda-forge
libssh2                   1.10.0               ha56f1ee_2    conda-forge
libstdcxx-devel_linux-64  9.4.0               hd854feb_12    conda-forge
libstdcxx-ng              11.2.0              he4da1e4_12    conda-forge
libtiff                   4.3.0                hf544144_1    conda-forge
libuuid                   2.32.1            h7f98852_1000    conda-forge
libwebp-base              1.2.2                h7f98852_1    conda-forge
libxcb                    1.13              h7f98852_1004    conda-forge
libxml2                   2.9.12               h72842e0_0    conda-forge
libzlib                   1.2.11            h36c2ea0_1013    conda-forge
lz4-c                     1.9.3                h9c3ff4c_1    conda-forge
lzo                       2.10              h516909a_1000    conda-forge
lzstring                  1.0.4                   py_1001    conda-forge
make                      4.3                  hd18ef5c_1    conda-forge
markdown                  3.3.6              pyhd8ed1ab_0    conda-forge
markupsafe                2.0.1            py39h3811e60_1    conda-forge
matplotlib-base           3.5.1            py39h2fa2bec_0    conda-forge
multiqc                   1.11               pyhdfd78af_0    bioconda
munkres                   1.1.4              pyh9f0ad1d_0    conda-forge
mysql-connector-c         6.1.11            h6eb9d5d_1007    conda-forge
ncurses                   6.2                  h58526e2_4    conda-forge
networkx                  2.6.3              pyhd8ed1ab_1    conda-forge
numpy                     1.22.1           py39h91f2184_0    conda-forge
olefile                   0.46               pyh9f0ad1d_1    conda-forge
openblas                  0.3.18          pthreads_h4748800_0    conda-forge
openjdk                   11.0.1            h516909a_1016    conda-forge
openjpeg                  2.4.0                hb52868f_1    conda-forge
openssl                   1.1.1l               h7f98852_0    conda-forge
packaging                 21.3               pyhd8ed1ab_0    conda-forge
pandas                    1.4.0            py39hde0f152_0    conda-forge
pango                     1.48.10              h54213e6_2    conda-forge
pbzip2                    1.1.13                        0    conda-forge
pcre                      8.45                 h9c3ff4c_0    conda-forge
pcre2                     10.37                h032f7d1_0    conda-forge
perl                      5.32.1          1_h7f98852_perl5    conda-forge
perl-carp                 1.50            pl5321hd8ed1ab_0    conda-forge
perl-constant             1.33            pl5321hd8ed1ab_0    conda-forge
perl-cpan-meta            2.150010        pl5321hdfd78af_1    bioconda
perl-cpan-meta-requirements 2.140           pl5321hdfd78af_1    bioconda
perl-cpan-meta-yaml       0.018           pl5321hdfd78af_1    bioconda
perl-data-dumper          2.173           pl5321h779adbc_1    bioconda
perl-encode               3.16            pl5321h779adbc_0    bioconda
perl-exporter             5.74            pl5321hd8ed1ab_0    conda-forge
perl-extutils-cbuilder    0.280230        pl5321hdfd78af_2    bioconda
perl-extutils-makemaker   7.64            pl5321hd8ed1ab_0    conda-forge
perl-extutils-manifest    1.72            pl5321hdfd78af_1    bioconda
perl-extutils-parsexs     3.35            pl5321hdfd78af_1    bioconda
perl-file-path            2.18            pl5321hd8ed1ab_0    conda-forge
perl-file-temp            0.2304          pl5321hd8ed1ab_0    conda-forge
perl-getopt-long          2.50            pl5321hdfd78af_2    bioconda
perl-ipc-cmd              1.02            pl5321hdfd78af_1    bioconda
perl-json-pp              4.04            pl5321hdfd78af_1    bioconda
perl-locale-maketext-simple 0.21            pl5321hdfd78af_3    bioconda
perl-module-build         0.4224          pl5321hdfd78af_4    bioconda
perl-module-corelist      5.20190524      pl5321hdfd78af_1    bioconda
perl-module-load          0.34            pl5321hdfd78af_0    bioconda
perl-module-load-conditional 0.68            pl5321hdfd78af_3    bioconda
perl-module-metadata      1.000036        pl5321hdfd78af_1    bioconda
perl-params-check         0.38            pl5321hdfd78af_2    bioconda
perl-parent               0.238           pl5321hd8ed1ab_0    conda-forge
perl-perl-ostype          1.010           pl5321hdfd78af_2    bioconda
perl-scalar-list-utils    1.52            pl5321h779adbc_1    bioconda
perl-text-abbrev          1.02            pl5321hdfd78af_1    bioconda
perl-text-parsewords      3.30            pl5321hdfd78af_1    bioconda
perl-version              0.9924          pl5321h779adbc_1    bioconda
picard                    2.26.10              hdfd78af_0    bioconda
pigz                      2.6                  h27826a3_0    conda-forge
pillow                    8.4.0            py39ha612740_0    conda-forge
pip                       21.3.1             pyhd8ed1ab_0    conda-forge
pixman                    0.40.0               h36c2ea0_0    conda-forge
preseq                    3.1.2                h445547b_2    bioconda
pthread-stubs             0.4               h36c2ea0_1001    conda-forge
pybigwig                  0.3.18           py39h015b436_1    bioconda
pycparser                 2.21               pyhd8ed1ab_0    conda-forge
pygments                  2.11.2             pyhd8ed1ab_0    conda-forge
pyopenssl                 21.0.0             pyhd8ed1ab_0    conda-forge
pyparsing                 3.0.7              pyhd8ed1ab_0    conda-forge
pysam                     0.17.0           py39h051187c_0    bioconda
pysocks                   1.7.1            py39hf3d152e_4    conda-forge
python                    3.9.9           h62f1059_0_cpython    conda-forge
python-dateutil           2.8.2              pyhd8ed1ab_0    conda-forge
python-isal               0.11.1           py39h3811e60_1    conda-forge
python-lzo                1.14             py39h265373d_0    conda-forge
python_abi                3.9                      2_cp39    conda-forge
pytz                      2021.3             pyhd8ed1ab_0    conda-forge
pyyaml                    6.0              py39h3811e60_3    conda-forge
qualimap                  2.2.2d               hdfd78af_2    bioconda
r-assertthat              0.2.1             r41hc72bb7e_2    conda-forge
r-backports               1.4.1             r41hcfec24a_0    conda-forge
r-base                    4.1.1                hb93adac_1    conda-forge
r-bh                      1.78.0_0          r41hc72bb7e_0    conda-forge
r-bibtex                  0.4.2.3           r41hcfec24a_0    conda-forge
r-bitops                  1.0_7             r41hcfec24a_0    conda-forge
r-blockmodeling           1.0.5             r41h859d828_0    conda-forge
r-brio                    1.1.3             r41hcfec24a_0    conda-forge
r-callr                   3.7.0             r41hc72bb7e_0    conda-forge
r-catools                 1.18.2            r41h03ef668_0    conda-forge
r-cli                     3.1.1             r41h03ef668_0    conda-forge
r-codetools               0.2_18            r41hc72bb7e_0    conda-forge
r-crayon                  1.4.2             r41hc72bb7e_0    conda-forge
r-desc                    1.4.0             r41hc72bb7e_0    conda-forge
r-diffobj                 0.3.5             r41hcfec24a_0    conda-forge
r-digest                  0.6.29            r41h03ef668_0    conda-forge
r-doparallel              1.0.16            r41hc72bb7e_0    conda-forge
r-dorng                   1.8.2             r41hc72bb7e_1    conda-forge
r-ellipsis                0.3.2             r41hcfec24a_0    conda-forge
r-evaluate                0.14              r41hc72bb7e_2    conda-forge
r-fansi                   1.0.2             r41hcfec24a_0    conda-forge
r-foreach                 1.5.1             r41hc72bb7e_0    conda-forge
r-formatr                 1.11              r41hc72bb7e_0    conda-forge
r-futile.logger           1.4.3           r41hc72bb7e_1003    conda-forge
r-futile.options          1.0.1           r41hc72bb7e_1002    conda-forge
r-getopt                  1.20.3            r41ha770c72_2    conda-forge
r-glue                    1.6.1             r41hcfec24a_0    conda-forge
r-gplots                  3.1.1             r41hc72bb7e_0    conda-forge
r-gtools                  3.9.2             r41hcfec24a_0    conda-forge
r-iterators               1.0.13            r41hc72bb7e_0    conda-forge
r-jsonlite                1.7.3             r41hcfec24a_0    conda-forge
r-kernsmooth              2.23_20           r41h742201e_0    conda-forge
r-lambda.r                1.2.4             r41hc72bb7e_1    conda-forge
r-lattice                 0.20_45           r41hcfec24a_0    conda-forge
r-lifecycle               1.0.1             r41hc72bb7e_0    conda-forge
r-magrittr                2.0.2             r41hcfec24a_0    conda-forge
r-matrix                  1.4_0             r41he454529_0    conda-forge
r-matrixstats             0.61.0            r41hcfec24a_0    conda-forge
r-optparse                1.7.1             r41hc72bb7e_0    conda-forge
r-pillar                  1.6.5             r41hc72bb7e_0    conda-forge
r-pkgconfig               2.0.3             r41hc72bb7e_1    conda-forge
r-pkgload                 1.2.4             r41h03ef668_0    conda-forge
r-pkgmaker                0.32.2            r41hc72bb7e_0    conda-forge
r-praise                  1.0.0           r41hc72bb7e_1005    conda-forge
r-processx                3.5.2             r41hcfec24a_0    conda-forge
r-ps                      1.6.0             r41hcfec24a_0    conda-forge
r-r6                      2.5.1             r41hc72bb7e_0    conda-forge
r-rcurl                   1.98_1.5          r41hcfec24a_0    conda-forge
r-registry                0.5_1             r41hc72bb7e_2    conda-forge
r-rematch2                2.1.2             r41hc72bb7e_1    conda-forge
r-restfulr                0.0.13            r41hdf9a8c9_1    bioconda
r-rjson                   0.2.21            r41h03ef668_0    conda-forge
r-rlang                   0.4.12            r41hcfec24a_0    conda-forge
r-rngtools                1.5.2             r41hc72bb7e_0    conda-forge
r-rprojroot               2.0.2             r41hc72bb7e_0    conda-forge
r-rstudioapi              0.13              r41hc72bb7e_0    conda-forge
r-snow                    0.4_4             r41hc72bb7e_0    conda-forge
r-stringi                 1.7.6             r41hcabe038_0    conda-forge
r-stringr                 1.4.0             r41hc72bb7e_2    conda-forge
r-testthat                3.1.2             r41h03ef668_0    conda-forge
r-tibble                  3.1.6             r41hcfec24a_0    conda-forge
r-utf8                    1.2.2             r41hcfec24a_0    conda-forge
r-vctrs                   0.3.8             r41hcfec24a_1    conda-forge
r-waldo                   0.3.1             r41hc72bb7e_0    conda-forge
r-withr                   2.4.3             r41hc72bb7e_0    conda-forge
r-xml                     3.99_0.8          r41hcfec24a_0    conda-forge
r-xtable                  1.8_4             r41hc72bb7e_3    conda-forge
r-yaml                    2.2.2             r41hcfec24a_0    conda-forge
readline                  8.1                  h46c0cb4_0    conda-forge
requests                  2.27.1             pyhd8ed1ab_0    conda-forge
rich                      11.0.0             pyhd8ed1ab_0    conda-forge
rsem                      1.3.3           pl5321ha025227_3    bioconda
rseqc                     4.0.0            py39h38f01e4_1    bioconda
salmon                    1.6.0                h84f40af_0    bioconda
samtools                  1.14                 hb421002_0    bioconda
scipy                     1.7.3            py39hee8e79c_0    conda-forge
sed                       4.8                  he412f7d_0    conda-forge
setuptools                60.5.0           py39hf3d152e_0    conda-forge
simplejson                3.17.6           py39h3811e60_0    conda-forge
six                       1.16.0             pyh6c4a22f_0    conda-forge
sortmerna                 4.3.4                h9ee0642_0    bioconda
spectra                   0.0.11                     py_1    conda-forge
sqlite                    3.37.0               h9cd32fc_0    conda-forge
star                      2.7.10a              h9ee0642_0    bioconda
subread                   2.0.1                h5bf99c6_1    bioconda
sysroot_linux-64          2.12                he073ed8_15    conda-forge
tbb                       2020.2               h4bd325d_4    conda-forge
tk                        8.6.11               h27826a3_1    conda-forge
tktable                   2.10                 hb7b940f_3    conda-forge
trim-galore               0.6.7                hdfd78af_0    bioconda
typing_extensions         4.0.1              pyha770c72_0    conda-forge
tzdata                    2021e                he74cb21_0    conda-forge
ucsc-bigwigsummary        377                  ha8a8165_3    bioconda
unicodedata2              14.0.0           py39h3811e60_0    conda-forge
urllib3                   1.26.8             pyhd8ed1ab_1    conda-forge
wheel                     0.37.1             pyhd8ed1ab_0    conda-forge
xopen                     1.4.0            py39hf3d152e_0    conda-forge
xorg-kbproto              1.0.7             h7f98852_1002    conda-forge
xorg-libice               1.0.10               h7f98852_0    conda-forge
xorg-libsm                1.2.3             hd9c2040_1000    conda-forge
xorg-libx11               1.7.2                h7f98852_0    conda-forge
xorg-libxau               1.0.9                h7f98852_0    conda-forge
xorg-libxdmcp             1.1.3                h7f98852_0    conda-forge
xorg-libxext              1.3.4                h7f98852_1    conda-forge
xorg-libxrender           0.9.10            h7f98852_1003    conda-forge
xorg-libxt                1.2.1                h7f98852_2    conda-forge
xorg-renderproto          0.11.1            h7f98852_1002    conda-forge
xorg-xextproto            7.3.0             h7f98852_1002    conda-forge
xorg-xproto               7.0.31            h7f98852_1007    conda-forge
xz                        5.2.5                h516909a_1    conda-forge
yaml                      0.2.5                h7f98852_2    conda-forge
zipp                      3.7.0              pyhd8ed1ab_0    conda-forge
zlib                      1.2.11            h36c2ea0_1013    conda-forge
zstd                      1.5.2                ha95c52a_0    conda-forge
